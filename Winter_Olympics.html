<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Overview</title>

<base target="_blank"/>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
}

pre code {
   display: block; padding: 0.5em;
}

code.r {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>


<!-- MathJax scripts -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



</head>

<body>
<!-- Title: How to Convert Sweave LaTeX to knitr R Markdown: Winter Olympic Medals Example -->

<p>The following post shows how to manually convert a Sweave LaTeX document into a knitr R Markdown document. The post (1) reviews many of the required changes; (2) provides an example of a document converted to R Markdown format based on an analysis of  Winter Olympic Medal data up to and including 2006; and (3) discusses the pros and cons of LaTeX and Markdown for performing analyses.</p>

<!-- more -->

<h1>Overview</h1>

<p>The following analyses of Winter Olympic Medals data have gone through several iterations:</p>

<ol>
<li><strong>R Script</strong>: I originally performed <a href="http://jeromyanglim.blogspot.com.au/2010/02/analysis-of-winter-olympic-medal-data.html">similar analyses in February 2010</a>. It was a simple set of commands where you could see the console output and view the plots. </li>
<li><strong>LaTeX Sweave</strong>: In February 2011 I adapted the example to make it a Sweave LaTex document. The <a href="https://github.com/jeromyanglim/Sweave_Winter_Olympics">source fo this is available on github</a>. With Sweave, I was able to create a document that weaved text, commands, console input, console output, and figures.</li>
<li><strong>R Markdown</strong>: Now in June 2012 I&#39;m using the example to review the process of converting a document from Sweave-LaTeX to R Markdown. The <a href="https://github.com/jeromyanglim/Winter_Olympic_Medals_R_Markdown">souce code is available here on github</a> (see the <code>*.rmd</code> file). </li>
</ol>

<h1>Converting from Sweave to R Markdown</h1>

<p>The following changes were required in order to convert my LaTeX Sweave document into an R Markdown document suitable for processing with <code>knitr</code> and <code>RStudio</code>. Many of these changes are fairly obvious if you understand LaTeX and Markdown; but a few are less obvious. And obviously there are many additional changes that might be required on other documents.</p>

<h2>R code chunks</h2>

<ul>
<li><strong>R code chunk delimiters:</strong> Update  from  <code>&lt;&lt; ... &gt;&gt;=</code> and <code>@</code> to R markdown format <code>&#96;&#96;&#96;{r ...}</code> and  <code>&#96;&#96;&#96;</code></li>
<li><strong>Inline code chunks:</strong> Update from <code>&#92;Sexpr{...}</code> to either <code>&#96;r ...&#96;</code> or <code>&#96;r I(...)&#96;</code> format.</li>
<li><strong>results=tex</strong>: Any <code>results=tex</code> needs to either be removed or converted to <code>results=&#39;asis&#39;</code>. Note that string values of knitr options need to be quoted.</li>
<li><strong>Boolean options</strong>: Sweave tolerates lower case <code>true</code> and <code>false</code> for code chunk options, <code>knitr</code> requires <code>TRUE</code> and <code>FALSE</code>.</li>
</ul>

<h2>Figures and Tables</h2>

<ul>
<li><strong>Floats</strong>: Remove figure and table floats (e.g., <code>\begin{table}...\end{table}</code>, <code>\begin{figure}...\end{figure}</code>). In R Markdown and HTML, there are no pages and thus content is just placed immediately in the document.</li>
<li><strong>Figure captions</strong>: Extract content from within the <code>\caption{}</code> command. When using R Markdown, it is often easiest to add captions  to the plot itself (e.g., using the <code>main</code> argument in base graphics). </li>
<li><strong>Table captions:</strong> extract content from within the <code>\caption{}</code> command; Table captions can be included in a <code>caption</code> argument using the <code>caption</code> argument to the <code>xtable</code> function (e.g., <code>print(xtable(MY_DAT_FRAME), &quot;html&quot;, caption=&quot;MY CAPTION&quot;, caption.placement=&quot;top&quot;)</code> ). Caption placement defaults to <code>&quot;bottom&quot;</code> of table but can be optinally specified as <code>&quot;top&quot;</code> either as a global option or in <code>print.xtable</code>. Alternatively table titles can just be included as Markdown text.</li>
<li><strong>References:</strong> Delete table and figure lables (e.g., <code>\label{...}</code>). Replace table and figure references (e.g., <code>\ref{...}</code> with actual numbers or other descriptive terminology. It would also be possible to implement something simple in R that stored table and figure numbers (e.g., initialise table and figure numbers at the start of the document; increment table counter each time a table is created and likewise for figures; store the value of counter in variable; include variable in caption text using <code>paste()</code> or something similar. Include counter in text using inline R code chunks.</li>
<li><strong>Table content</strong>: Markdown supports HTML; so one option is to convert LaTeX tables to HTML tables using a function like <code>print(xtable(MY_DATA_FRAME), type=&quot;html&quot;)</code>. This is combined with the <code>results=&#39;asis&#39;</code> R code chunk option.</li>
</ul>

<h2>Basic formatting</h2>

<ul>
<li><strong>Headings</strong>: if we assume <code>section</code> is the top level: then <code>\section{...}</code> becomes <code># ...</code>,  <code>\subsection{...}</code> becomes <code>## ...</code> and <code>\subsubsection{...}</code> becomes  <code>### ...</code></li>
<li><strong>Mathematics</strong>: Update latex mathematics to <code>$</code><code>latex ...</code> and <code>$$</code><code>latex ... $$</code> notation if using RStudio.</li>
<li><strong>Paragraph delimiters</strong>: If using RStudio then remove single line breaks that were not intended to be paragraph breaks.</li>
<li><strong>Hyperlinks</strong>: Convert LaTeX Hyperlinks from <code>\href</code> or <code>url</code> to <code>[text](url)</code> format.</li>
</ul>

<h2>LaTeX things</h2>

<ul>
<li><strong>Comments</strong>: Remove any LaTeX comments or switch from <code>% comment</code> to <code>&lt;!-- comment --&gt;</code></li>
<li><strong>LaTeX escaped characters</strong>: Remove unnecessary escape characters (e.g., <code>\%</code> is just <code>%</code>).</li>
<li><strong>R Markdown escaped characters</strong>: Writing about the R Markdown language in R Markdown sometimes requires the use of HTML codes for special characters such as backticks (<code>&amp;#96;</code>) and backslashes (<code>&amp;#92;</code>) to prevent the text from being interpreted; see <a href="http://www.ascii.cl/htmlcodes.htm">here for a list of HTML character codes</a>.</li>
<li><strong>Header</strong>: Remove the LaTeX header information up to and including <code>\begin{document}</code>; extract any incorporate any relevant content such as title, abstract, author, date, etc.</li>
</ul>

<h1>R Markdown Analysis of Winter Olympic Medal Data</h1>

<p>The following shows the output of the actual analysis after running the rmd source through <code>Knit HTML</code> in Rstudio. If you&#39;re curious, you may wish to view the <a href="https://github.com/jeromyanglim/Winter_Olympic_Medals_R_Markdown/blob/master/Winter_Olympics.rmd">rmd source code on GitHub side by side this point at this point</a>.</p>

<h2>Import Dataset</h2>

<pre><code class="r">library(xtable)
options(stringsAsFactors = FALSE)
medals &lt;- read.csv(&quot;data/medals.csv&quot;)
medals$Year &lt;- as.numeric(medals$Year)
medals &lt;- medals[!is.na(medals$Year), ]
</code></pre>

<p>The Olympic Medals data frame includes <code>2311</code> medals from <code>1924</code> to  <code>2006</code>.  The data was sourced from <a href="http://www.guardian.co.uk/news/datablog/2010/feb/11/winter-olympics-medals-by-country">The Guardian Data Blog</a>.</p>

<h2>Total Medals by Year</h2>

<pre><code class="r"># http://www.math.mcmaster.ca/~bolker/emdbook/chap3A.pdf
x &lt;- aggregate(medals$Year, list(Year = medals$Year), length)
names(x) &lt;- c(&quot;year&quot;, &quot;medals&quot;)
x$pos &lt;- seq(x$year)
fit &lt;- nls(medals ~ a * pos^b + c, x, start = list(a = 10, b = 1, 
    c = 50))
</code></pre>

<p>In general over the years the number of Winter Olympic medals awarded has increased.  In order to model this relationship, year was converted to ordinal position.  A three parameter power function seemed plausible, \(  y = ax^b + c \), where \(  y \) is total medals awarded and \(  x \) is the ordinal position of the olympics starting at one.  The best fitting parameters by least-squares were</p>

<p>\[  
0.202 
x^{2.297 + 50.987}.
 \]</p>

<p>The figure displays the data and the line of best fit for the model. The model predicts that 2010, 2014, and 2018 would have  <code>271</code>,  <code>295</code>, and <code>322</code> medals  respectively.</p>

<pre><code class="r">plot(medals ~ pos, x,  las = 1, 
        ylab = &quot;Total Medals Awarded&quot;, 
        xlab = &quot;Ordinal Position of Olympics&quot;,
        main=&quot;Total medals awarded 
     by ordinal position of Olympics with
     predicted three parameter power function fit displayed.&quot;,
        las = 1,
        bty=&quot;l&quot;)
lines(x$pos, predict(fit))
</code></pre>

<p><img src="http://i.imgur.com/atTmh.png" alt="plot of chunk figure_of_medals"/> </p>

<h1>Gender Ratio by Year</h1>

<pre><code class="r">medalsByYearByGender &lt;- aggregate(medals$Year, list(Year = medals$Year, 
    Event.gender = medals$Event.gender), length)
medalsByYearByGender &lt;- medalsByYearByGender[medalsByYearByGender$Event.gender != 
    &quot;X&quot;, ]
propf &lt;- list()
propf$prop &lt;- medalsByYearByGender[medalsByYearByGender$Event.gender == 
    &quot;W&quot;, &quot;x&quot;]/(medalsByYearByGender[medalsByYearByGender$Event.gender == &quot;W&quot;, 
    &quot;x&quot;] + medalsByYearByGender[medalsByYearByGender$Event.gender == &quot;M&quot;, &quot;x&quot;])
propf$year &lt;- medalsByYearByGender[medalsByYearByGender$Event.gender == 
    &quot;W&quot;, &quot;Year&quot;]
propf$propF &lt;- format(round(propf$prop, 2))

propf$table &lt;- with(propf, cbind(year, propF))
colnames(propf$table) &lt;- c(&quot;Year&quot;, &quot;Prop. Female&quot;)
</code></pre>

<p>The figure shows the number of medals won by males and  females by year. The table shows the proportion of medals awarded to females by year. It shows a generally similar pattern for males and females. Medals increase gradually until around the late 1980s after which the rate of increase accelerates. However, females started from a much smaller base. Thus, both the absolute difference and the percentage difference has decreased over time to the point where in 2006 <code>46</code> of medals were won by females.</p>

<pre><code class="r">plot(x ~ Year, medalsByYearByGender[medalsByYearByGender$Event.gender == 
    &quot;M&quot;, ], ylim = c(0, max(x)), pch = &quot;m&quot;, col = &quot;blue&quot;, las = 1, ylab = &quot;Total Medals Awarded&quot;, 
    bty = &quot;l&quot;, main = &quot;Total Medals Won by Gender and Year&quot;)
points(medalsByYearByGender[medalsByYearByGender$Event.gender == 
    &quot;W&quot;, &quot;Year&quot;], medalsByYearByGender[medalsByYearByGender$Event.gender == 
    &quot;W&quot;, &quot;x&quot;], col = &quot;red&quot;, pch = &quot;f&quot;)
</code></pre>

<p><img src="http://i.imgur.com/idGC7.png" alt="plot of chunk fgenderRatioByYear_figure"/> </p>

<pre><code class="r">print(xtable(propf$table,
             caption=&quot;Proportion of Medals that were awarded to Females by Year&quot;), 
      type=&quot;html&quot;, 
      caption.placement=&quot;top&quot;,
      html.table.attributes=&#39;align=&quot;center&quot;&#39;)
</code></pre>

<!-- html table generated in R 2.15.0 by xtable 1.7-0 package -->

<!-- Mon Jun  4 22:14:27 2012 -->

<TABLE align="center">
<CAPTION ALIGN="top"> Proportion of Medals that were awarded to Females by Year </CAPTION>
<TR> <TH>  </TH> <TH> Year </TH> <TH> Prop. Female </TH>  </TR>
  <TR> <TD align="right"> 1 </TD> <TD> 1924 </TD> <TD> 0.07 </TD> </TR>
  <TR> <TD align="right"> 2 </TD> <TD> 1928 </TD> <TD> 0.08 </TD> </TR>
  <TR> <TD align="right"> 3 </TD> <TD> 1932 </TD> <TD> 0.08 </TD> </TR>
  <TR> <TD align="right"> 4 </TD> <TD> 1936 </TD> <TD> 0.12 </TD> </TR>
  <TR> <TD align="right"> 5 </TD> <TD> 1948 </TD> <TD> 0.18 </TD> </TR>
  <TR> <TD align="right"> 6 </TD> <TD> 1952 </TD> <TD> 0.23 </TD> </TR>
  <TR> <TD align="right"> 7 </TD> <TD> 1956 </TD> <TD> 0.26 </TD> </TR>
  <TR> <TD align="right"> 8 </TD> <TD> 1960 </TD> <TD> 0.38 </TD> </TR>
  <TR> <TD align="right"> 9 </TD> <TD> 1964 </TD> <TD> 0.37 </TD> </TR>
  <TR> <TD align="right"> 10 </TD> <TD> 1968 </TD> <TD> 0.37 </TD> </TR>
  <TR> <TD align="right"> 11 </TD> <TD> 1972 </TD> <TD> 0.36 </TD> </TR>
  <TR> <TD align="right"> 12 </TD> <TD> 1976 </TD> <TD> 0.35 </TD> </TR>
  <TR> <TD align="right"> 13 </TD> <TD> 1980 </TD> <TD> 0.34 </TD> </TR>
  <TR> <TD align="right"> 14 </TD> <TD> 1984 </TD> <TD> 0.36 </TD> </TR>
  <TR> <TD align="right"> 15 </TD> <TD> 1988 </TD> <TD> 0.37 </TD> </TR>
  <TR> <TD align="right"> 16 </TD> <TD> 1992 </TD> <TD> 0.43 </TD> </TR>
  <TR> <TD align="right"> 17 </TD> <TD> 1994 </TD> <TD> 0.43 </TD> </TR>
  <TR> <TD align="right"> 18 </TD> <TD> 1998 </TD> <TD> 0.44 </TD> </TR>
  <TR> <TD align="right"> 19 </TD> <TD> 2002 </TD> <TD> 0.45 </TD> </TR>
  <TR> <TD align="right"> 20 </TD> <TD> 2006 </TD> <TD> 0.46 </TD> </TR>
   </TABLE>

<h1>Countries with the Most Medals</h1>

<pre><code class="r">cmm &lt;- list()
cmm$medals &lt;- sort(table(medals$NOC), dec = TRUE)
cmm$country &lt;- names(cmm$medals)
cmm$prop &lt;- cmm$medals/sum(cmm$medals)
cmm$propF &lt;- paste(round(cmm$prop * 100, 2), &quot;%&quot;, sep = &quot;&quot;)

cmm$row1 &lt;- c(&quot;Rank&quot;, &quot;Country&quot;, &quot;Total&quot;, &quot;%&quot;)
cmm$rank &lt;- seq(cmm$medals)
cmm$include &lt;- 1:10

cmm$table &lt;- with(cmm, rbind(cbind(rank[include], country[include], 
    medals[include], propF[include])))
colnames(cmm$table) &lt;- cmm$row1
</code></pre>

<p>Norway has won the most medals with <code>280</code> (<code>12.12</code>%). The table shows the top 10.  Russia, USSR, and EUN (Unified Team in 1992 Olympics) have a combined total of <code>293</code>.  Germany, GDR, and FRG have a combined medal total of  <code>309</code>.</p>

<pre><code class="r">print(xtable(cmm$table, caption=&quot;Rankings of Medals Won by Country&quot;), 
      &quot;html&quot;, include.rownames=FALSE, caption.placement=&#39;top&#39;,
      html.table.attributes=&#39;align=&quot;center&quot;&#39;)
</code></pre>

<!-- html table generated in R 2.15.0 by xtable 1.7-0 package -->

<!-- Mon Jun  4 22:14:27 2012 -->

<TABLE align="center">
<CAPTION ALIGN="top"> Rankings of Medals Won by Country </CAPTION>
<TR> <TH> Rank </TH> <TH> Country </TH> <TH> Total </TH> <TH> % </TH>  </TR>
  <TR> <TD> 1 </TD> <TD> NOR </TD> <TD> 280 </TD> <TD> 12.12% </TD> </TR>
  <TR> <TD> 2 </TD> <TD> USA </TD> <TD> 216 </TD> <TD> 9.35% </TD> </TR>
  <TR> <TD> 3 </TD> <TD> URS </TD> <TD> 194 </TD> <TD> 8.39% </TD> </TR>
  <TR> <TD> 4 </TD> <TD> AUT </TD> <TD> 185 </TD> <TD> 8.01% </TD> </TR>
  <TR> <TD> 5 </TD> <TD> GER </TD> <TD> 158 </TD> <TD> 6.84% </TD> </TR>
  <TR> <TD> 6 </TD> <TD> FIN </TD> <TD> 151 </TD> <TD> 6.53% </TD> </TR>
  <TR> <TD> 7 </TD> <TD> CAN </TD> <TD> 119 </TD> <TD> 5.15% </TD> </TR>
  <TR> <TD> 8 </TD> <TD> SUI </TD> <TD> 118 </TD> <TD> 5.11% </TD> </TR>
  <TR> <TD> 9 </TD> <TD> SWE </TD> <TD> 118 </TD> <TD> 5.11% </TD> </TR>
  <TR> <TD> 10 </TD> <TD> GDR </TD> <TD> 110 </TD> <TD> 4.76% </TD> </TR>
   </TABLE>

<h1>Proportion of Gold Medals by Country</h1>

<p>Looking only at countries that have won more than 50 medals in the dataset, the figure shows that the proportion of medals won that were gold, silver, or bronze.</p>

<pre><code class="r">NOC50Plus &lt;- names(table(medals$NOC)[table(medals$NOC) &gt; 50])
medalsSubset &lt;- medals[medals$NOC %in% NOC50Plus, ]
medalsByMedalByNOC &lt;- prop.table(table(medalsSubset$NOC, medalsSubset$Medal), 
                                 margin = 1)
medalsByMedalByNOC &lt;- medalsByMedalByNOC[order(medalsByMedalByNOC[, &quot;Gold&quot;], 
         decreasing = TRUE), c(&quot;Gold&quot;, &quot;Silver&quot;, &quot;Bronze&quot;)]
barplot(round(t(medalsByMedalByNOC), 2), horiz = TRUE, las = 1, 
        col=c(&quot;gold&quot;, &quot;grey71&quot;, &quot;chocolate4&quot;), 
        xlab = &quot;Proportion of Medals&quot;,
        main=&quot;Proportion of medals won that were gold, silver or bronze.&quot;)
</code></pre>

<p><img src="http://i.imgur.com/L7f1C.png" alt="plot of chunk proportion_gold"/> </p>

<h1>How many different countries have won medals by year?</h1>

<pre><code class="r">listOfYears &lt;- unique(medals$Year)
names(listOfYears) &lt;- unique(medals$Year)
totalNocByYear &lt;- sapply(listOfYears, function(X) length(table(medals[medals$Year == 
    X, &quot;NOC&quot;])))
</code></pre>

<p>The figure shows the total number of countries winning medals by year.</p>

<pre><code class="r">plot(x = names(totalNocByYear), totalNocByYear, ylim = c(0, max(totalNocByYear)), 
    las = 1, xlab = &quot;Year&quot;, main = &quot;Total Number of Countries Winning Medals By Year&quot;, 
    ylab = &quot;Total Number of Countries&quot;, bty = &quot;l&quot;)
</code></pre>

<p><img src="http://i.imgur.com/VKzmi.png" alt="plot of chunk figure_total_medals"/> </p>

<h1>Australia at the Winter Olympics</h1>

<pre><code class="r">ausmedals &lt;- list()
ausmedals$data &lt;- medals[medals$NOC == &quot;AUS&quot;, ]
ausmedals$data &lt;- ausmedals$data[, c(&quot;Year&quot;, &quot;City&quot;, &quot;Discipline&quot;, 
    &quot;Event&quot;, &quot;Medal&quot;)]
ausmedals$table &lt;- ausmedals$data
</code></pre>

<p>Given that I am an Australian I decided to have a look at the Australian medal count. Australia does not get a lot of snow.  Up to and including 2006, Australia has won  <code>6</code> medals. It won its first medal in  <code>1994</code>. Of the <code>6</code> medals,  <code>3</code> were bronze, <code>0</code> were silver, and <code>3</code> were gold.  The table lists each of these medals.</p>

<pre><code class="r">print(xtable(ausmedals$table, 
             caption=&#39;List of Australian Medals&#39;,
             digits=0),
      type=&#39;html&#39;, 
      caption.placement=&#39;top&#39;, 
      include.rownames=FALSE,
      html.table.attributes=&#39;align=&quot;center&quot;&#39;) 
</code></pre>

<!-- html table generated in R 2.15.0 by xtable 1.7-0 package -->

<!-- Mon Jun  4 22:15:10 2012 -->

<TABLE align="center">
<CAPTION ALIGN="top"> List of Australian Medals </CAPTION>
<TR> <TH> Year </TH> <TH> City </TH> <TH> Discipline </TH> <TH> Event </TH> <TH> Medal </TH>  </TR>
  <TR> <TD align="right"> 1994 </TD> <TD> Lillehammer </TD> <TD> Short Track S. </TD> <TD> 5000m relay </TD> <TD> Bronze </TD> </TR>
  <TR> <TD align="right"> 1998 </TD> <TD> Nagano </TD> <TD> Alpine Skiing </TD> <TD> slalom </TD> <TD> Bronze </TD> </TR>
  <TR> <TD align="right"> 2002 </TD> <TD> Salt Lake City </TD> <TD> Short Track S. </TD> <TD> 1000m </TD> <TD> Gold </TD> </TR>
  <TR> <TD align="right"> 2002 </TD> <TD> Salt Lake City </TD> <TD> Freestyle Ski. </TD> <TD> aerials </TD> <TD> Gold </TD> </TR>
  <TR> <TD align="right"> 2006 </TD> <TD> Turin </TD> <TD> Freestyle Ski. </TD> <TD> aerials </TD> <TD> Bronze </TD> </TR>
  <TR> <TD align="right"> 2006 </TD> <TD> Turin </TD> <TD> Freestyle Ski. </TD> <TD> moguls </TD> <TD> Gold </TD> </TR>
   </TABLE>

<h1>Ice Hockey</h1>

<pre><code class="r">icehockey &lt;- medals[medals$Sport == &quot;Ice Hockey&quot; &amp; medals$Event.gender == 
    &quot;M&quot; &amp; medals$Medal == &quot;Gold&quot;, ]
icehockeyf &lt;- medals[medals$Sport == &quot;Ice Hockey&quot; &amp; medals$Event.gender == 
    &quot;W&quot; &amp; medals$Medal == &quot;Gold&quot;, ]

# names(table(icehockey$NOC)[table(icehockey$NOC) &gt; 1])
</code></pre>

<p>The following are some statistics about Winter Olympics Ice Hockey up to and including the 2006 Winter Olympics.  </p>

<ul>
<li>Out of the  <code>20</code>  Winter Olympics that have been staged,  Mens Ice Hockey has been held in  <code>20</code> and the Womens in <code>3</code>.</li>
<li>The USSR has won the most mens gold medals with <code>7</code> golds. It goes up to <code>8</code> if the 1992 Unified Team is included. </li>
<li>Canada has the second most golds with  <code>6</code>. </li>
<li>After that the only two nations to win more than one gold are  Sweden (<code>2</code> golds) and the United States (<code>2</code> golds).</li>
<li> The  table shows the countries who won gold and silver medals by year.</li>
<li>In the case of the Women&#39;s Ice Hockey, Canada has won <code>2</code> and the United States has won <code>1</code>.</li>
</ul>

<pre><code class="r">icehockeygs &lt;- medals[medals$Sport == &quot;Ice Hockey&quot; &amp; 
    medals$Event.gender == &quot;M&quot; &amp;
    medals$Medal %in% c(&quot;Silver&quot;, &quot;Gold&quot;),  c(&quot;Year&quot;, &quot;Medal&quot;, &quot;NOC&quot;)]
icetab &lt;- list()
icetab$data &lt;- reshape(icehockeygs, idvar=&quot;Year&quot;, timevar=&quot;Medal&quot;,
    direction=&quot;wide&quot;)
names(icetab$data) &lt;- c(&quot;Year&quot;, &quot;Gold&quot;, &quot;Silver&quot;)

print(xtable(icetab$data, 
             caption =&quot;Country Winning Gold and Silver Medals by Year in Mens Ice Hockey&quot;, 
             digits=0), 
      type=&quot;html&quot;,     
      include.rownames=FALSE,
      caption.placement=&quot;top&quot;,
      html.table.attributes=&#39;align=&quot;center&quot;&#39;)
</code></pre>

<!-- html table generated in R 2.15.0 by xtable 1.7-0 package -->

<!-- Mon Jun  4 22:15:10 2012 -->

<TABLE align="center">
<CAPTION ALIGN="top"> Country Winning Gold and Silver Medals by Year in Mens Ice Hockey </CAPTION>
<TR> <TH> Year </TH> <TH> Gold </TH> <TH> Silver </TH>  </TR>
  <TR> <TD align="right"> 1924 </TD> <TD> CAN </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 1928 </TD> <TD> CAN </TD> <TD> SWE </TD> </TR>
  <TR> <TD align="right"> 1932 </TD> <TD> CAN </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 1936 </TD> <TD> GBR </TD> <TD> CAN </TD> </TR>
  <TR> <TD align="right"> 1948 </TD> <TD> CAN </TD> <TD> TCH </TD> </TR>
  <TR> <TD align="right"> 1952 </TD> <TD> CAN </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 1956 </TD> <TD> URS </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 1960 </TD> <TD> USA </TD> <TD> CAN </TD> </TR>
  <TR> <TD align="right"> 1964 </TD> <TD> URS </TD> <TD> SWE </TD> </TR>
  <TR> <TD align="right"> 1968 </TD> <TD> URS </TD> <TD> TCH </TD> </TR>
  <TR> <TD align="right"> 1972 </TD> <TD> URS </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 1976 </TD> <TD> URS </TD> <TD> TCH </TD> </TR>
  <TR> <TD align="right"> 1980 </TD> <TD> USA </TD> <TD> URS </TD> </TR>
  <TR> <TD align="right"> 1984 </TD> <TD> URS </TD> <TD> TCH </TD> </TR>
  <TR> <TD align="right"> 1988 </TD> <TD> URS </TD> <TD> FIN </TD> </TR>
  <TR> <TD align="right"> 1992 </TD> <TD> EUN </TD> <TD> CAN </TD> </TR>
  <TR> <TD align="right"> 1994 </TD> <TD> SWE </TD> <TD> CAN </TD> </TR>
  <TR> <TD align="right"> 1998 </TD> <TD> CZE </TD> <TD> RUS </TD> </TR>
  <TR> <TD align="right"> 2002 </TD> <TD> CAN </TD> <TD> USA </TD> </TR>
  <TR> <TD align="right"> 2006 </TD> <TD> SWE </TD> <TD> FIN </TD> </TR>
   </TABLE>

<h1>Reflections on the Conversion Process</h1>

<ul>
<li>Markdown versus LaTeX: 

<ul>
<li>I prefer performing analyses with Markdown than I do with LateX. </li>
<li>Markdown is easier to type than LaTeX. </li>
<li>Markdown is easier to read than LaTeX.</li>
<li>It is easier with Markdown to get started with analyses.</li>
<li>Many analyses are only presented on the screen and as such page breaks in LaTeX are a nuisance. This extends to many features of LaTeX such as headers, figure and table placement, margins, table formatting, partiuclarly for long or wide tables, and so on.</li>
<li>That said, journal articles, books, and other artefacts that are bound to the model of a printed page are not going anywhere. </li>
<li>Furthermore, bibliographies, cross-references, elaborate control of table appearance, and more are all features which LaTeX makes easier than Markdown.</li>
</ul></li>
<li>R Markdown to Sweave LaTeX:

<ul>
<li>The more common conversion task that I can imagine is taking some simple analyses in R Markdown and having to convert them into knitr LaTeX in order to include the content in a journal article.</li>
<li>The first time I converted between the formats, it was good to do it in a relatively manual way to get a sense of all the required changes; however, if I had a large document or was doing the task on subsequent occasions, I would look at more automated solutions using string replacement tools (e.g., sed, or even just replacement commands in a text editor such as Vim), and markup conversion tools (e.g., pandoc).</li>
<li>Perhaps if the formats get popular enough, developers will start to build dedicated conversion tools.</li>
</ul></li>
</ul>

<h1>Additional Resources</h1>

<p>If you liked this post, you may want to subscribe to the <a href="http://feeds.feedburner.com/jeromyanglim">RSS feed of my blog</a>. Also see:</p>

<ul>
<li>This post on <a href="http://jeromyanglim.blogspot.com/2012/05/getting-started-with-r-markdown-knitr.html">Getting Started with R Markdown, knitr, and Rstudio 0.96</a></li>
<li>This post for another <a href="http://jeromyanglim.blogspot.com/2012/05/example-reproducile-report-using-r.html">Example Reproducible Report using R Markdown which analyses California Schools Test Data</a></li>
<li>These <a href="http://jeromyanglim.blogspot.com.au/search/label/Sweave">Assorted posts using Sweave</a></li>
<li>The <a href="http://yihui.name/knitr/">knitr</a> home page and <a href="http://yihui.name/knitr/options">knitr options page</a>.</li>
<li>the <a href="http://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf">xtable LaTeX table gallery</a> which can also be used to generate HTML tables for inclusion in Markdown.</li>
</ul>

</body>

</html>

